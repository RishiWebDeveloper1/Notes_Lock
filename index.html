<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes Lock</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="megacontainer" id="newUserPage">
        <div class="container">
            <div class="password-box">
                <div class="password-text">
                    New Password
                </div>
                <div class="input-box">
                    <input class="input" type="password" value="" name="password" id="newPasswordInput">
                </div>
            </div>
            <div class="password-box">
                <div class="password-text">
                    Confirm Password
                </div>
                <div class="input-box">
                    <input class="input" type="password" value="" name="password" id="confirmPasswordInput">
                </div>
            </div>
            <div class="password-box">
                <div class="password-text">
                    Backup Question
                </div>
                <div class="input-box">
                    <input class="input" type="text" value="" name="question" id="questionInput">
                </div>
            </div>
            <div class="password-box">
                <div class="password-text">
                    Backup Answer
                </div>
                <div class="input-box">
                    <input class="input" type="password" value="" name="answer" id="answerInput">
                </div>
            </div>
            <div class="show-password-box">
                <div class="check">
                    <input type="checkbox" name="passwordCheck" id="passwordsCheck" onclick="showPasswords()">
                </div>
                <div class="show-password-text">
                    Show Password
                </div>
            </div>
            <div class="save-password-box button" onclick="savePassword()">
                <div class="save-password-text">
                    Save Password
                </div>
            </div>
        </div>
    </div>

    <div class="megacontainer" id="unlockPage">
        <div class="container">
            <div class="password-box">
                <div class="password-text">
                    Enter Password
                </div>
                <div class="input-box">
                    <input class="input" type="password" value="56115611" name="password" id="passwordInput"
                        placeholder="Enter Password">
                </div>
            </div>
            <div class="show-password-box">
                <div class="check">
                    <input type="checkbox" name="passwordCheck" id="passwordCheck" onclick="showPassword()">
                </div>
                <div class="show-password-text">
                    Show Password
                </div>
            </div>
            <div class="unlock-button-box button" onclick="unlock()">
                <div class="unlock-button-text">
                    Unlock
                </div>
            </div>
            <div class="forget-password-box">
                <div class="forget-password-text" onclick="forgetPassword()">
                    Forget Password?
                </div>
            </div>
        </div>
    </div>

    <div class="megacontainer-notes" id="NotesLockPage">
        <div class="lock" onclick="lock()">lock</div>
        <div class="all-notes" id="allNotes">
            <div class="notes-box">
                <div class="notes-text" id="notesText" contenteditable="false">
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Laborum quasi harum iusto hic aliquid et
                    similique enim sint alias beatae quae dolor ipsa error asperiores pariatur possimus quisquam
                    deleniti
                    earum commodi, necessitatibus nisi fugit accusamus facilis ducimus! Neque, aperiam illo! Odio quis
                    itaque necessitatibus alias saepe facere error vero eligendi earum eaque accusantium laboriosam
                    impedit
                    asperiores nisi aliquam, placeat, tenetur culpa. Quibusdam modi esse, numquam enim magnam maxime
                    expedita eos nostrum nihil, sapiente sit odit fugiat temporibus? Earum animi, facere atque illum,
                    veniam
                    aliquam at debitis ipsum, mollitia excepturi magnam! Eum tempore ducimus, sed dicta ab reiciendis
                    distinctio quisquam nihil.
                </div>
                <div class="button-box">
                    <div class="edit-text-box">
                        <img src="images\edit_text_icon.svg" alt="" id="edit-text-icon" onclick="editNotesText()">
                    </div>
                    <div class="delete-text-box">
                        <img src="images\delete_text_icon.svg" alt="" id="delete-text-icon" onclick="deleteNotesText()">
                    </div>
                </div>
            </div>
        </div>
        <div class="new-text-box">
            <div class="new-text" onclick="addNewNote()">
                New Text
            </div>
        </div>
    </div>

    <script>
        // document.addEventListener('contextmenu', (e) => e. preventDefault());
        let newUserPage = document.getElementById("newUserPage");
        let unlockPage = document.getElementById("unlockPage");
        let NotesLockPage = document.getElementById("NotesLockPage");
        var newPasswordInput = document.getElementById("newPasswordInput");
        var confirmPasswordInput = document.getElementById("confirmPasswordInput");
        let passwordsCheck = document.getElementById("passwordsCheck");
        var questionInput = document.getElementById("questionInput");
        var answerInput = document.getElementById("answerInput");
        var passwordInput = document.getElementById("passwordInput");
        let passwordCheck = document.getElementById("passwordCheck");
        let notesText = document.getElementById("notesText");


        if (localStorage.getItem("password") == null) {
            newUserPage.style.display = "flex";
            unlockPage.style.display = "none";
            NotesLockPage.style.display = "none";
        }
        else {
            newUserPage.style.display = "none";
            unlockPage.style.display = "flex";
            NotesLockPage.style.display = "none";
        }

        function showPassword() {
            console.log(passwordCheck.checked)
            if (passwordCheck.checked == true) {
                passwordInput.type = "text";
            } else {
                passwordInput.type = "password";
            }
        }

        function showPasswords() {
            console.log(passwordsCheck.checked)
            if (passwordsCheck.checked == true) {
                newPasswordInput.type = "text";
                confirmPasswordInput.type = "text";
            } else {
                newPasswordInput.type = "password";
                confirmPasswordInput.type = "password";
            }
        }

        function savePassword() {
            if (newPasswordInput.value == "") {
                alert("Password can not be Empty!");
            }
            else if (newPasswordInput.value == confirmPasswordInput.value) {
                localStorage.setItem("password", newPasswordInput.value);
                localStorage.setItem("question", questionInput.value);
                localStorage.setItem("answer", answerInput.value);
                newUserPage.style.display = "none";
                unlockPage.style.display = "flex";
                NotesLockPage.style.display = "none";
            }
            else {
                alert("New and Confirm both Password are not same!");
            }
            newPasswordInput.value = "";
            confirmPasswordInput.value = "";
        }

        function forgetPassword() {
            let answerMatch = prompt(localStorage.getItem("question"));
            if (localStorage.getItem("answer") == answerMatch) {
                newUserPage.style.display = "flex";
                unlockPage.style.display = "none";
                NotesLockPage.style.display = "none";
                passwordInput.value = "";
            }
            else {
                alert("Wrong answer!")
            }
        }

        function unlock() {
            if (passwordInput.value == localStorage.getItem("password")) {
                newUserPage.style.display = "none";
                unlockPage.style.display = "none";
                NotesLockPage.style.display = "flex";
                passwordInput.value = "";
                loadNotes();
            }
            else {
                alert("You Entered Invalid password!");
            }
        }

        function lock() {
            newUserPage.style.display = "none";
            unlockPage.style.display = "flex";
            NotesLockPage.style.display = "none";
        }

        function loadNotes() {
            notesText.innerHTML = localStorage.getItem("notes1");
        }

        function editNotesText() {
            let editTextIcon = document.getElementById("edit-text-icon");
            if (notesText.contentEditable == "true") {
                localStorage.setItem("notes1", notesText.innerText);
                editTextIcon.src = "images/edit_text_icon.svg";
                editTextIcon.style.width = "100%";
                notesText.contentEditable = "false";
            }
            else {
                editTextIcon.src = "images/save_text_icon.svg";
                editTextIcon.style.width = "40%";
                notesText.contentEditable = "true";
            }
        }

        function deleteNotesText() {
            notesText.innerHTML = "";
            localStorage.setItem("notes1", notesText.innerText);
        }

        function addNewNote() {
            // Create a new notes box container
            var notesBox = document.createElement("div");
            notesBox.classList.add("notes-box");

            // Create notes text element
            var notesText = document.createElement("div");
            notesText.classList.add("notes-text");
            notesText.setAttribute("contenteditable", "false");
            notesText.textContent = "New notes";

            // Create button box container
            var buttonBox = document.createElement("div");
            buttonBox.classList.add("button-box");

            // Create edit text button
            var editButton = document.createElement("div");
            editButton.classList.add("edit-text-box");
            var editIcon = document.createElement("img");
            editIcon.id = "edit-text-icon";
            editIcon.src = "images/edit-pencil-01-svgrepo-com.svg";
            editIcon.alt = "Edit";
            editIcon.onclick = editNotesText;
            editButton.appendChild(editIcon);

            // Create delete text button
            var deleteButton = document.createElement("div");
            deleteButton.classList.add("delete-text-box");
            var deleteIcon = document.createElement("img");
            deleteIcon.id = "delete-text-icon";
            deleteIcon.src = "images/delete_text_icon.svg";
            deleteIcon.alt = "Delete";
            deleteIcon.onclick = deleteNotesText;
            deleteButton.appendChild(deleteIcon);

            // Append elements to their respective containers
            buttonBox.appendChild(editButton);
            buttonBox.appendChild(deleteButton);
            notesBox.appendChild(notesText);
            notesBox.appendChild(buttonBox);

            // Append the new notes box to the container
            var container = document.getElementById("allNotes");
            container.appendChild(notesBox);
        }

        let obj = {
            "notes1": "lpoghftjhdrdghk",
            "notes2": "ghffukftcjhfthhg",
            "notes3": "gtchgfcghv"
        }
        console.log(obj);
        obj2 = JSON.stringify(obj);
        console.log(obj2)
        obj3 = JSON.parse(obj2)
        console.log(obj3)
        localStorage.setItem("allnotes", obj2);

        
    </script>
</body>

</html>

<!-- "~!@#$%^&*()_+{}:"<>?QWERTYUIOPASDFGHJKLZXCVBNM|}{:><>?":`1234567890-=]\]['/.;.,qwertyuiopasdfghjklzxcvbnm']"} -->